generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(uuid())
  email         String   @unique
  name          String?
  password      String
  role          Role     @default(EDITOR)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  assignedLeads Lead[]   @relation("LeadAssignedTo")
  makingOfs     MakingOf[] @relation("UserMakingOf")
}

model Market {
  id                String    @id @default(uuid())
  code              String    @unique
  labelPt           String
  labelEn           String
  heroMessagePt     String?
  heroMessageEn     String?
  priority          Int       @default(0)
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  heroMessageEs     String?
  heroMessageFr     String?
  labelEs           String?
  labelFr           String?
  highlightProjects Project[]
}

model Media {
  id                  String         @id @default(uuid())
  type                MediaType      @default(IMAGE)
  originalUrl         String
  thumbnailUrl        String?
  mediumUrl           String?
  largeUrl            String?
  webpUrl             String?
  avifUrl             String?
  width               Int?
  height              Int?
  sizeBytes           Int?
  durationSeconds     Int?
  format              String?
  contentType         String?
  altPt               String?
  altEn               String?
  altEs               String?
  altFr               String?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  projectHero         Project?
  projectGalleries    ProjectMedia[]
  pageHeroBackgrounds Page[]         @relation("PageHeroBackground")
  pageDemoreelVideos  Page[]         @relation("PageDemoreelVideo")
  analysis            MediaAnalysis?
  blogPostCovers      BlogPost[]     @relation("BlogPostCover")
  makingOf            MakingOf?      @relation("MakingOfMedia", fields: [makingOfId], references: [id])
  makingOfId          String?

  // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
  // Sistema de Tags (Op├º├úo 2) - Contexto da imagem
  // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
  pageSlug     String? // "what/cinema-audiovisual", "home", "work", etc.
  sectionSlug  String? // "hero", "gallery", "section-image"
  imageType    String? // "hero-background", "gallery-image", "service-icon"
  servicesTags String[] // ["cinema-audiovisual", "pos-producao-vfx"]

  @@index([pageSlug])
  @@index([sectionSlug])
}

model Tag {
  id        String      @id @default(uuid())
  slug      String      @unique
  labelPt   String
  labelEn   String
  labelEs   String?
  labelFr   String?
  category  TagCategory
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  projects  Project[]   @relation("ProjectToTag")
  blogPosts BlogPost[]  @relation("BlogPostToTag")
}

model Service {
  id            String        @id @default(uuid())
  slug          String        @unique
  titlePt       String
  titleEn       String
  titleEs       String?
  titleFr       String?
  descriptionPt String?
  descriptionEn String?
  descriptionEs String?
  descriptionFr String?
  icon          String?
  status        ServiceStatus @default(PUBLISHED)
  priority      Int           @default(0)
  segments      String[]
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  projects      Project[]     @relation("ProjectToService")
}

model Project {
  id            String               @id @default(uuid())
  slug          String               @unique
  title         String
  shortTitle    String?
  summaryPt     String?
  summaryEn     String?
  summaryEs     String?
  summaryFr     String?
  city          String?
  stateProvince String?
  country       String?
  year          Int?
  client        String?
  type          String?
  featured      Boolean              @default(false)
  priorityHome  Int                  @default(0)
  status        ProjectStatus        @default(DRAFT)
  ctaLabelPt    String?
  ctaLabelEn    String?
  ctaUrl        String?
  heroImageId   String?              @unique
  marketId      String?
  createdAt     DateTime             @default(now())
  updatedAt     DateTime             @updatedAt
  descriptionEn String?
  descriptionEs String?
  descriptionFr String?
  descriptionPt String?
  
  // ­ƒñû Monitoramento Autom├ítico de Conte├║do
  monitorEnabled        Boolean           @default(false)
  monitorKeywords       String[]          // Keywords para busca autom├ítica
  creditType            CreditType?       // Tipo de cr├®dito para posts relacionados
  creditText            String?           // Texto do cr├®dito ("Anima├º├úo por Azimut")
  azimutContributions   String[]          // Lista de contribui├º├Áes da Azimut
  
  pageViews     PageView[]
  heroImage     Media?               @relation(fields: [heroImageId], references: [id])
  market        Market?              @relation(fields: [marketId], references: [id])
  interactions  ProjectInteraction[]
  gallery       ProjectMedia[]
  services      Service[]            @relation("ProjectToService")
  tags          Tag[]                @relation("ProjectToTag")
  sections      Section[]            @relation("SectionProjects")
  monitoredPosts BlogPostMonitor[]   @relation("ProjectMonitoredPosts") // Rela├º├úo com monitoramento
  makingOfs      MakingOf[]          @relation("ProjectMakingOf") // Making-ofs do projeto
}

model Page {
  id                     String     @id @default(uuid())
  name                   String
  slug                   String     @unique
  seoTitlePt             String?
  seoTitleEn             String?
  seoDescPt              String?
  seoDescEn              String?
  status                 PageStatus @default(PUBLISHED)
  createdAt              DateTime   @default(now())
  updatedAt              DateTime   @updatedAt
  heroSloganPt           String?
  heroSloganEn           String?
  heroSloganEs           String?
  heroSloganFr           String?
  heroSubtitleEn         String?
  heroSubtitleEs         String?
  heroSubtitleFr         String?
  heroSubtitlePt         String?
  seoDescEs              String?
  seoDescFr              String?
  seoTitleEs             String?
  seoTitleFr             String?
  pillar1Pt              String?
  pillar1En              String?
  pillar1Es              String?
  pillar1Fr              String?
  pillar2Pt              String?
  pillar2En              String?
  pillar2Es              String?
  pillar2Fr              String?
  pillar3Pt              String?
  pillar3En              String?
  pillar3Es              String?
  pillar3Fr              String?
  // Hero Media - Sistema H├¡brido (Media OU URL manual)
  heroBackgroundImageId  String?
  heroBackgroundImageUrl String?
  demoreelVideoId        String?
  demoreelVideoUrl       String?
  heroBackgroundImage    Media?     @relation("PageHeroBackground", fields: [heroBackgroundImageId], references: [id])
  demoreelVideo          Media?     @relation("PageDemoreelVideo", fields: [demoreelVideoId], references: [id])
  sections               Section[]
}

model Section {
  id             String    @id @default(uuid())
  pageId         String
  order          Int       @default(0)
  type           String
  layout         String?
  titlePt        String?
  titleEn        String?
  titleEs        String?
  titleFr        String?
  bodyPt         String?
  bodyEn         String?
  bodyEs         String?
  bodyFr         String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  page           Page      @relation(fields: [pageId], references: [id])
  linkedProjects Project[] @relation("SectionProjects")
}

model ProjectMedia {
  id        String   @id @default(uuid())
  projectId String
  mediaId   String
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  media     Media    @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@unique([projectId, mediaId])
  @@index([projectId, order])
}

model VisitorSession {
  sessionId      String   @id
  ipAddress      String?
  userAgent      String?
  language       String?
  country        String?
  region         String?
  city           String?
  duration       Int      @default(0)
  lastActivityAt DateTime @default(now())
  leadId         String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  // NOVOS CAMPOS PARA ANALYTICS AVAN├çADO
  visitorFingerprint    String? @unique // Hash ├║nico do visitante (identifica an├┤nimo)
  deviceType            String? // mobile, desktop, tablet
  browser               String? // Chrome, Safari, Firefox, etc
  os                    String? // Windows, macOS, iOS, Android
  screenResolution      String? // 1920x1080
  referrer              String? // De onde veio
  utmSource             String? // utm_source da URL
  utmMedium             String? // utm_medium
  utmCampaign           String? // utm_campaign
  visitCount            Int     @default(1) // Quantas vezes voltou
  isReturning           Boolean @default(false) // Visitante frequente
  isPWAInstalled        Boolean @default(false) // Instalou PWA
  bounceRate            Boolean @default(false) // S├│ entrou e saiu (sem intera├º├úo)
  engagementScore       Int     @default(0) // 0-100 (baseado em intera├º├Áes)
  conversionProbability Float? // Probabilidade de converter (0-1, calculado por IA)

  interestScore       InterestScore?
  pageViews           PageView[]
  projectInteractions ProjectInteraction[]
  pwaInstalls         PWAInstall[]
  visitorBehaviors    VisitorBehavior[]
  lead                Lead?                @relation(fields: [leadId], references: [id], onDelete: SetNull)

  @@index([visitorFingerprint])
  @@index([country])
  @@index([isReturning])
  @@index([isPWAInstalled])
  @@index([createdAt])
  @@index([lastActivityAt])
}

model PageView {
  id          String         @id @default(uuid())
  sessionId   String
  pageSlug    String?
  projectSlug String?
  projectId   String?
  timeSpent   Int            @default(0)
  scrollDepth Int            @default(0)
  viewedAt    DateTime       @default(now())
  project     Project?       @relation(fields: [projectId], references: [id])
  session     VisitorSession @relation(fields: [sessionId], references: [sessionId])
}

model ProjectInteraction {
  id        String                 @id @default(uuid())
  sessionId String
  projectId String
  type      ProjectInteractionType @default(VIEW)
  metadata  Json
  createdAt DateTime               @default(now())
  project   Project                @relation(fields: [projectId], references: [id])
  session   VisitorSession         @relation(fields: [sessionId], references: [sessionId])
}

model InterestScore {
  sessionId           String         @id
  museumScore         Int            @default(0)
  brandScore          Int            @default(0)
  festivalScore       Int            @default(0)
  cityScore           Int            @default(0)
  educationScore      Int            @default(0)
  researchScore       Int            @default(0)
  vrScore             Int            @default(0)
  aiScore             Int            @default(0)
  installationScore   Int            @default(0)
  conversionScore     Int            @default(0)
  visitorType         String?
  recommendedProjects Json?
  suggestedAction     String?
  suggestedPage       String?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  session             VisitorSession @relation(fields: [sessionId], references: [sessionId])
}

model Lead {
  id               String       @id @default(uuid())
  name             String
  email            String
  phone            String?
  company          String?
  position         String?
  leadType         LeadType     @default(CONTACT_FORM)
  projectType      String?
  budget           String?
  timeline         String?
  description      String?
  sourceUrl        String?
  referrer         String?
  utmSource        String?
  utmMedium        String?
  utmCampaign      String?
  status           LeadStatus   @default(NEW)
  priority         LeadPriority @default(MEDIUM)
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  assignedToId     String?
  assignedAt       DateTime?
  notes            String?
  lastContactAt    DateTime?
  // NOVOS CAMPOS PARA ANALYTICS
  leadScore        Int          @default(0) // 0-100
  organizationType String? // governo, museu, corporativo, etc
  estimatedValue   Float? // R$
  interestInGrants Boolean      @default(false)
  country          String?
  city             String?

  // CAMPOS NEWSLETTER
  wantsNewsletter   Boolean      @default(false)
  preferredLanguage String?      // pt, en, es, fr
  newsletterSource  String?      // footer, popup, blog, etc

  // CAMPOS VANCOUVER (Estudar em Vancouver)
  age              Int?
  currentSituation String?
  targetSchool     String? // VFS, VanArts, etc
  areaInterest     String? // 3D Animation, Game Design, etc
  intakeYear       String? // 2026, 2027, 2028
  englishLevel     String? // Iniciante, Intermedi├írio, Avan├ºado, Fluente
  hasPortfolio     String? // sim-completo, sim-precisa-melhorar, comecando, nao-tenho
  budgetRange      String? // ate-100k, 100k-200k, etc
  fundingSource    String? // familia, economia-propria, financiamento, bolsa
  howHeard         String? // webinar, palestra-escola, feira, redes-sociais, indicacao, google
  comments         String?

  assignedTo  User?            @relation("LeadAssignedTo", fields: [assignedToId], references: [id])
  editalLeads LeadEdital[]
  sessions    VisitorSession[]

  @@index([status])
  @@index([priority])
  @@index([assignedToId])
  @@index([createdAt])
  @@index([leadScore])
  @@index([email])
}

model Edital {
  id                  String       @id @default(uuid())
  name                String
  source              String
  sourceUrl           String
  country             String
  type                EditalType
  area                String
  categories          String[]
  minValue            Float?
  maxValue            Float?
  currency            String       @default("BRL")
  deadline            DateTime?
  applicationDeadline DateTime?
  status              EditalStatus @default(ABERTO)
  eligibility         String?
  applicationSteps    String?
  requiredDocs        String[]
  description         String?
  requirements        String?
  relevanceScore      Int          @default(0)
  matchedServices     String[]
  matchedProjects     String[]
  azimutFitNotes      String?
  contactEmail        String?
  contactName         String?
  contactPhone        String?
  contactLinkedIn     String?
  scrapedAt           DateTime     @default(now())
  lastChecked         DateTime?
  createdAt           DateTime     @default(now())
  updatedAt           DateTime     @updatedAt
  leads               LeadEdital[]

  @@index([status])
  @@index([deadline])
  @@index([country])
  @@index([relevanceScore])
  @@index([source])
}

model LeadEdital {
  id              String           @id @default(uuid())
  editalId        String
  leadId          String
  emailSent       Boolean          @default(false)
  emailSentAt     DateTime?
  callScheduled   Boolean          @default(false)
  callScheduledAt DateTime?
  callLink        String?
  portfolioSent   Boolean          @default(false)
  portfolioSentAt DateTime?
  proposalSent    Boolean          @default(false)
  proposalSentAt  DateTime?
  status          LeadEditalStatus @default(PENDING)
  notes           String?
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  edital          Edital           @relation(fields: [editalId], references: [id], onDelete: Cascade)
  lead            Lead             @relation(fields: [leadId], references: [id], onDelete: Cascade)

  @@unique([editalId, leadId])
  @@index([status])
}

model Settings {
  id                     String   @id @default("singleton")
  siteName               String?  @default("Azimut")
  siteUrl                String?  @default("https://azmt.com.br")
  contactEmail           String?
  contactPhone           String?
  defaultMetaDescription String?
  defaultKeywords        String?
  ogImageUrl             String?
  facebookUrl            String?
  instagramUrl           String?
  linkedinUrl            String?
  twitterUrl             String?
  youtubeUrl             String?
  kabbamApiKey           String?
  kabbamApiUrl           String?
  smtpHost               String?
  smtpPort               Int?
  smtpUser               String?
  smtpPassword           String?
  smtpFromEmail          String?
  deepseekApiKey         String?
  notificationEmail      String?
  defaultLanguage        String?  @default("pt")
  defaultCountry         String?  @default("BR")
  timezone               String?  @default("America/Sao_Paulo")
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt
}

enum Role {
  SUPER_ADMIN
  ADMIN
  EDITOR
  VIEWER
}

enum TagCategory {
  TECHNOLOGY
  INDUSTRY
  FORMAT
  OTHER
}

enum ServiceStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum ProjectStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum PageStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum LeadType {
  CONTACT_FORM
  BUDGET_INQUIRY
  VANCOUVER
}

enum LeadPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum LeadStatus {
  NEW
  IN_PROGRESS
  WON
  LOST
  CONTACTED
  PROPOSAL_SENT
  NEGOTIATION
}

enum EditalType {
  FEDERAL
  ESTADUAL
  MUNICIPAL
  PRIVADO
  ONG
  INSTITUTO
  PROVINCIAL
  NATIONAL
}

enum EditalStatus {
  ABERTO
  FECHADO
  ENVIADO
  GANHO
  PERDIDO
}

enum LeadEditalStatus {
  PENDING
  CONTACTED
  EMAIL_SENT
  CALL_SCHEDULED
  PROPOSAL_SENT
  WON
  LOST
}

enum MediaType {
  IMAGE
  VIDEO
}

enum ProjectInteractionType {
  VIEW
  CLICK
  LIKE
  SHARE
  CTA
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// QUIZ VANCOUVER & COURSE RECOMMENDER - IA RESPONSES
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model QuizVancouverResponse {
  id        String  @id @default(uuid())
  sessionId String? // Se an├┤nimo (antes do lead)
  leadId    String? // Se j├í preencheu formul├írio

  // Respostas do Quiz (10 perguntas)
  experience String // zero, beginner, intermediate, advanced
  english    String // basic, intermediate, advanced, native
  goal       String // career-change, skill-up, portfolio, immigration
  area       String // animation, vfx, game, film
  budget     String // low, medium, high, very-high
  timeline   String // asap, soon, planning, researching
  portfolio  String // none, basic, good, professional
  software   String // none, basic, intermediate, advanced
  commitment String // exploring, serious, decided, ready
  support    String // self, partial, full, sponsored

  // Resultado calculado
  score           Int // 0-100
  readiness       String // low, medium, high
  bestSchool      String // VFS, VanArts
  estimatedBudget String // CAD 25k-30k, etc

  // Metadata
  lang        String   @default("pt")
  completedAt DateTime @default(now())
  createdAt   DateTime @default(now())

  @@index([sessionId])
  @@index([leadId])
  @@index([score])
  @@index([readiness])
  @@index([completedAt])
}

model CourseRecommendationResponse {
  id        String  @id @default(uuid())
  sessionId String? // Se an├┤nimo (antes do lead)
  leadId    String? // Se j├í preencheu formul├írio

  // Respostas do Recomendador (5 perguntas)
  experience String // zero, beginner, intermediate, advanced
  goal       String // job, freelance, career-change, level-up
  time       String // part-time, weekends, full-time
  budget     String // low, medium, high
  interest   String // ai, creative, technical, immersive

  // Cursos recomendados (Top 3)
  course1Id    String
  course1Match Int // % match
  course2Id    String
  course2Match Int
  course3Id    String
  course3Match Int

  // Metadata
  lang        String   @default("pt")
  completedAt DateTime @default(now())
  createdAt   DateTime @default(now())

  @@index([sessionId])
  @@index([leadId])
  @@index([completedAt])
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// VIDEOS VFS/VANARTS
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model AcademyVideo {
  id String @id @default(uuid())

  // Video Info
  videoUrl     String // YouTube/Vimeo URL
  thumbnailUrl String?
  type         VideoType @default(YOUTUBE)

  // Content
  titlePt       String
  titleEn       String
  titleEs       String?
  titleFr       String?
  descriptionPt String?
  descriptionEn String?
  descriptionEs String?
  descriptionFr String?

  // Category
  category VideoCategory @default(INSTITUTIONAL)
  section  VideoSection  @default(VANCOUVER) // Vancouver, Courses, Workshops, Corporate
  school   String? // VFS, VanArts, Azimut

  // Metadata
  duration Int? // seconds
  views    Int         @default(0)
  featured Boolean     @default(false)
  priority Int         @default(0)
  status   VideoStatus @default(PUBLISHED)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([category])
  @@index([section])
  @@index([school])
  @@index([featured])
  @@index([priority])
  @@index([status])
}

enum VideoType {
  YOUTUBE
  VIMEO
  MP4
}

enum VideoCategory {
  INSTITUTIONAL
  TESTIMONIAL
  STUDENT_WORK
  PROMO
  TUTORIAL
  EVENT
}

enum VideoSection {
  VANCOUVER
  COURSES
  WORKSHOPS
  CORPORATE
  HOME
}

enum VideoStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// WEBINARS
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model Webinar {
  id String @id @default(uuid())

  // Content
  titlePt       String
  titleEn       String
  titleEs       String?
  titleFr       String?
  descriptionPt String?
  descriptionEn String?
  descriptionEs String?
  descriptionFr String?

  // Schedule
  scheduledAt DateTime
  duration    Int // minutes
  timezone    String   @default("America/Sao_Paulo")

  // Platform
  platform     String // Zoom, Google Meet, YouTube Live
  meetingUrl   String? // URL da reuni├úo
  recordingUrl String? // URL da grava├º├úo (depois do evento)

  // Target
  targetAudience String[] // students, corporate, schools, general
  language       String   @default("pt")

  // Registration
  registrations    WebinarRegistration[]
  maxParticipants  Int?
  requiresApproval Boolean               @default(false)

  // Metadata
  status       WebinarStatus @default(SCHEDULED)
  featured     Boolean       @default(false)
  thumbnailUrl String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([scheduledAt])
  @@index([status])
  @@index([featured])
}

model WebinarRegistration {
  id        String @id @default(uuid())
  webinarId String

  // User Info
  name    String
  email   String
  phone   String?
  company String?

  // Metadata
  status       String    @default("CONFIRMED") // CONFIRMED, CANCELLED, ATTENDED, NO_SHOW
  registeredAt DateTime  @default(now())
  attendedAt   DateTime?

  webinar Webinar @relation(fields: [webinarId], references: [id], onDelete: Cascade)

  @@index([webinarId])
  @@index([email])
  @@index([status])
}

enum WebinarStatus {
  SCHEDULED
  LIVE
  COMPLETED
  CANCELLED
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// AI MEDIA ANALYSIS
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model MediaAnalysis {
  id        String   @id @default(uuid())
  mediaId   String   @unique
  analysis  Json // Armazena o JSON completo da an├ílise
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  media Media @relation(fields: [mediaId], references: [id], onDelete: Cascade)

  @@index([mediaId])
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// ANALYTICS & VISITOR TRACKING
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model PWAInstall {
  id         String   @id @default(uuid())
  sessionId  String
  type       String // 'installed' | 'prompt_shown' | 'prompt_dismissed' | 'prompt_accepted'
  platform   String? // Win32, Linux x86_64, iPhone, etc
  userAgent  String?
  browser    String? // Chrome, Safari, Firefox, etc
  deviceType String? // mobile, desktop, tablet
  outcome    String? // 'accepted' | 'dismissed'
  country    String?
  city       String?
  createdAt  DateTime @default(now())

  session VisitorSession @relation(fields: [sessionId], references: [sessionId], onDelete: Cascade)

  @@index([sessionId])
  @@index([type])
  @@index([country])
  @@index([createdAt])
}

model VisitorBehavior {
  id           String   @id @default(uuid())
  sessionId    String
  behaviorType String // 'page_view' | 'click' | 'scroll' | 'hover' | 'form_start' | 'form_abandon' | 'video_play' | 'download' | 'share' | 'search' | 'filter' | 'pwa_install' | 'cta_click' | 'external_link'
  element      String? // ID ou classe do elemento interagido
  elementType  String? // 'button' | 'link' | 'image' | 'video' | 'form' | etc
  pageSlug     String? // P├ígina onde aconteceu
  value        String? // Valor (ex: termo de busca, filtro selecionado)
  metadata     Json? // Dados extras (coordenadas, tempo, etc)
  timestamp    DateTime @default(now())

  session VisitorSession @relation(fields: [sessionId], references: [sessionId], onDelete: Cascade)

  @@index([sessionId])
  @@index([behaviorType])
  @@index([pageSlug])
  @@index([timestamp])
}

model FieldMetadata {
  id         String @id @default(uuid())
  pageSlug   String @map("page_slug")
  sectionKey String @map("section_key")
  fieldKey   String @map("field_key")

  fieldLabel       String  @map("field_label")
  fieldDescription String? @map("field_description")
  fieldType        String  @map("field_type")

  maxLength      Int?     @map("max_length")
  minLength      Int?     @map("min_length")
  required       Boolean  @default(false)
  allowedFormats String[] @map("allowed_formats")

  imageWidth       Int?    @map("image_width")
  imageHeight      Int?    @map("image_height")
  imageAspectRatio String? @map("image_aspect_ratio")
  videoMaxDuration Int?    @map("video_max_duration")
  videoMaxSizeMb   Int?    @map("video_max_size_mb")

  textFormat        String? @map("text_format")
  lineBreaksAllowed Boolean @default(false) @map("line_breaks_allowed")

  whereAppears   String? @map("where_appears")
  visualGuideUrl String? @map("visual_guide_url")
  cardPosition   Int?    @map("card_position")

  exampleValue    String? @map("example_value")
  exampleImageUrl String? @map("example_image_url")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@unique([pageSlug, sectionKey, fieldKey])
  @@index([pageSlug, sectionKey])
  @@map("field_metadata")
}

model ImageSpecification {
  id         String @id @default(uuid())
  pageSlug   String @map("page_slug")
  sectionKey String @map("section_key")
  fieldKey   String @map("field_key")

  recommendedWidth  Int      @map("recommended_width")
  recommendedHeight Int      @map("recommended_height")
  minWidth          Int?     @map("min_width")
  minHeight         Int?     @map("min_height")
  maxWidth          Int?     @map("max_width")
  maxHeight         Int?     @map("max_height")
  aspectRatio       String?  @map("aspect_ratio")
  maxFileSizeMb     Int      @default(5) @map("max_file_size_mb")
  allowedFormats    String[] @default(["jpg", "jpeg", "png", "webp", "avif"]) @map("allowed_formats")

  description    String? @map("description")
  whereAppears   String? @map("where_appears")
  visualGuideUrl String? @map("visual_guide_url")

  autoCompress       Boolean @default(true) @map("auto_compress")
  autoConvertWebp    Boolean @default(true) @map("auto_convert_webp")
  generateThumbnails Boolean @default(false) @map("generate_thumbnails")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@unique([pageSlug, sectionKey, fieldKey])
  @@index([pageSlug, sectionKey])
  @@map("image_specifications")
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// ­ƒôØ BLOG - Sistema completo de artigos
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model BlogCategory {
  id          String   @id @default(uuid())
  slug        String   @unique
  namePt      String
  nameEn      String
  nameEs      String?
  nameFr      String?
  descPt      String?
  descEn      String?
  descEs      String?
  descFr      String?
  color       String?  @default("#c92337") // Cor do badge
  icon        String?  // ├ìcone (emoji ou nome do ├¡cone)
  priority    Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  posts       BlogPost[]
}

model BlogPost {
  id              String         @id @default(uuid())
  slug            String         @unique
  
  // T├¡tulos (4 idiomas)
  titlePt         String
  titleEn         String
  titleEs         String?
  titleFr         String?
  
  // Resumo/Excerpt (4 idiomas) - aparece na listagem
  excerptPt       String?
  excerptEn       String?
  excerptEs       String?
  excerptFr       String?
  
  // Conte├║do completo (4 idiomas) - Markdown ou HTML
  contentPt       String?        @db.Text
  contentEn       String?        @db.Text
  contentEs       String?        @db.Text
  contentFr       String?        @db.Text
  
  // SEO (4 idiomas)
  seoTitlePt      String?
  seoTitleEn      String?
  seoTitleEs      String?
  seoTitleFr      String?
  seoDescPt       String?
  seoDescEn       String?
  seoDescEs       String?
  seoDescFr       String?
  
  // Imagem de capa
  coverImageId    String?
  coverImage      Media?         @relation("BlogPostCover", fields: [coverImageId], references: [id])
  coverImageUrl   String?        // URL alternativa se n├úo usar Media
  coverImageAlt   String?
  
  // Metadados
  authorName      String?
  authorImageUrl  String?
  readingTimeMin  Int?           @default(5) // Tempo de leitura em minutos
  
  // Status e publica├º├úo
  status          BlogPostStatus @default(DRAFT)
  featured        Boolean        @default(false) // Destaque na home do blog
  publishedAt     DateTime?      // Data de publica├º├úo (permite agendar)
  
  // Categoria (uma por post)
  categoryId      String?
  category        BlogCategory?  @relation(fields: [categoryId], references: [id])
  
  // Tags (muitas por post) - reutiliza Tag existente
  tags            Tag[]          @relation("BlogPostToTag")
  
  // M├®tricas
  viewCount       Int            @default(0)
  shareCount      Int            @default(0)
  
  // Rela├º├úo com Monitoramento
  monitorSuggestions BlogPostMonitor[] @relation("BlogPostMonitorToPost")
  
  // Timestamps
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  
  @@index([slug])
  @@index([status, publishedAt])
  @@index([categoryId])
  @@index([featured])
}

enum BlogPostStatus {
  DRAFT      // Rascunho - n├úo vis├¡vel
  PUBLISHED  // Publicado - vis├¡vel
  SCHEDULED  // Agendado - publicar em publishedAt
  ARCHIVED   // Arquivado - n├úo vis├¡vel
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// ­ƒñû SISTEMA DE MONITORAMENTO AUTOM├üTICO DE CONTE├ÜDO
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// Monitora automaticamente not├¡cias, redes sociais, v├¡deos
// sobre projetos da Azimut e sugere posts para o blog
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model BlogPostMonitor {
  id                    String            @id @default(uuid())
  
  // Rela├º├úo com Projeto
  projectId             String?
  project               Project?          @relation("ProjectMonitoredPosts", fields: [projectId], references: [id])
  projectName           String?           // Nome do projeto para busca (se n├úo tiver projeto cadastrado)
  
  // Tipo de Cr├®dito
  creditType            CreditType        @default(CLIENTE)
  creditText            String?           // "Anima├º├úo por Azimut", "Produ├º├úo Azimut", etc.
  azimutRole            String?           // "Anima├º├úo", "Produ├º├úo", "Realiza├º├úo", etc.
  azimutContributions   String[]          // ["arte generativa", "motion design", "led 20x5m"]
  
  // Fonte do Conte├║do
  sourceType            SourceType        // NEWS, INSTAGRAM, YOUTUBE, BLOG, PRESS, TWITTER, FACEBOOK
  sourceUrl             String
  sourceTitle           String?
  sourceContent         String?           @db.Text
  sourceImageUrl        String?
  sourceVideoUrl        String?
  sourceAuthor          String?
  sourceDate            DateTime?
  
  // Conte├║do Processado por IA
  suggestedTitlePt      String?
  suggestedTitleEn      String?
  suggestedTitleEs      String?
  suggestedTitleFr      String?
  suggestedExcerptPt    String?
  suggestedExcerptEn    String?
  suggestedExcerptEs    String?
  suggestedExcerptFr    String?
  suggestedContentPt    String?           @db.Text
  suggestedContentEn    String?           @db.Text
  suggestedContentEs    String?           @db.Text
  suggestedContentFr    String?           @db.Text
  aiProcessedAt         DateTime?
  
  // Metadados
  keywords              String[]
  mentions              String[]          // Influencers, ve├¡culos, etc.
  status                MonitorStatus     @default(PENDING) // PENDING, APPROVED, REJECTED, PUBLISHED
  
  // Data de Publica├º├úo (para projetos que precisam aguardar estreia)
  publishAfterDate      DateTime?         // Data a partir da qual pode publicar (ex: data de estreia)
  canPublishNow         Boolean           @default(false)  // Se true, pode publicar imediatamente
  
  // Tipo de Cr├®dito e Publica├º├úo
  creditMode            CreditMode        @default(FULL_CREDIT) // FULL_CREDIT ou REWRITE
  isAutoral             Boolean           @default(false)  // Se ├® projeto autoral (pode publicar livremente)
  
  // Rela├º├úo com Post Aprovado
  blogPostId            String?
  blogPost              BlogPost?         @relation("BlogPostMonitorToPost", fields: [blogPostId], references: [id])
  
  // Timestamps
  createdAt             DateTime          @default(now())
  updatedAt             DateTime          @updatedAt
  
  @@index([projectId])
  @@index([status])
  @@index([sourceType])
  @@index([createdAt])
}

enum CreditType {
  CLIENTE   // Projeto do cliente - cr├®dito parcial ("Anima├º├úo por Azimut")
  AUTORAL   // Projeto autoral - cr├®dito total ("Produ├º├úo Azimut")
  EVENTO    // Evento - cr├®dito total ("Realiza├º├úo Azimut")
}

enum SourceType {
  NEWS       // Not├¡cias (Google News, sites de not├¡cias)
  INSTAGRAM  // Posts do Instagram
  YOUTUBE    // V├¡deos do YouTube
  BLOG       // Posts de blogs
  PRESS      // Mat├®rias de imprensa
  TWITTER    // Tweets
  FACEBOOK   // Posts do Facebook
  RSS        // Feeds RSS
  LINKEDIN   // Posts do LinkedIn
  JOURNAL    // Jornais impressos/digitais
  TV         // Telejornais, programas de TV
  PODCAST    // Podcasts
  NOTION     // P├íginas do Notion
  OTHER      // Outras fontes
}

enum CreditMode {
  FULL_CREDIT  // Postar mat├®ria original com cr├®ditos completos
  REWRITE      // Reorganizar texto/imagens com IA (reescrever)
}

enum MonitorStatus {
  PENDING    // Aguardando aprova├º├úo
  APPROVED   // Aprovado (j├í virou post ou ser├í publicado)
  REJECTED   // Rejeitado
  PUBLISHED  // J├í publicado como post
}

// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ
// SISTEMA DE MAKING-OF
// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ

model MakingOf {
  id                String          @id @default(uuid())
  
  // Rela├º├úo com Projeto
  projectId         String?
  project           Project?        @relation("ProjectMakingOf", fields: [projectId], references: [id])
  projectName       String?         // Nome do projeto se n├úo tiver cadastrado
  
  // Tipo de Making-of
  makingOfType      MakingOfType    @default(PERSONAL)
  source            MakingOfSource  @default(INTERNAL)
  
  // Colaborador/Criador
  collaboratorId    String?
  collaborator      Collaborator?   @relation(fields: [collaboratorId], references: [id])
  collaboratorName  String?         // Nome se n├úo tiver cadastrado (ex: "Eduardo Nartino")
  
  // Cliente (se for depoimento/material do cliente)
  clientName        String?
  clientEmail       String?
  
  // Conte├║do
  title             String
  description       String?         @db.Text
  mediaType         MakingOfMediaType @default(IMAGE)
  
  // M├¡dias
  mediaFiles        Media[]         @relation("MakingOfMedia")
  
  // Metadados
  location          String?         // Local onde foi feito
  eventDate         DateTime?       // Data do evento/grava├º├úo
  tags              String[]
  
  // Status e Publica├º├úo
  status            MakingOfStatus  @default(DRAFT)
  featured          Boolean         @default(false)
  publishToBlog     Boolean         @default(false)
  publishToNewsletter Boolean       @default(false)
  publishToSocial   Boolean         @default(false)
  
  // Cr├®ditos e Permiss├Áes
  creditText        String?         // "Making-of por Eduardo Nartino"
  canPublishNow     Boolean         @default(true)
  publishAfterDate  DateTime?       // Se precisar aguardar data
  
  // Upload
  uploadedBy        String
  uploadedByUser    User            @relation("UserMakingOf", fields: [uploadedBy], references: [id])
  
  // Timestamps
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  
  @@index([projectId])
  @@index([collaboratorId])
  @@index([status])
  @@index([makingOfType])
  @@index([createdAt])
}

model Collaborator {
  id            String      @id @default(uuid())
  name          String
  email         String?     @unique
  phone         String?
  instagram     String?     // @username
  portfolio     String?     // URL do portfolio
  bio           String?     @db.Text
  specialties   String[]    // ["making-of", "fotografia", "v├¡deo"]
  
  // Rela├º├úo
  makingOfs     MakingOf[]
  
  // Status
  isActive      Boolean     @default(true)
  
  // Timestamps
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  
  @@index([name])
  @@index([isActive])
}

enum MakingOfType {
  PERSONAL      // Making-of pessoal da equipe Azimut
  PARTNERSHIP   // Parceria (troca de apoio)
  HIRED         // Contratado para fazer making-of
  CLIENT        // Material/depoimento do cliente
  EVENT         // Evento (Festival VR, etc.)
}

enum MakingOfSource {
  INTERNAL      // Feito pela equipe Azimut
  COLLABORATOR  // Feito por colaborador (Eduardo Nartino, etc.)
  CLIENT        // Enviado pelo cliente
  PARTNER       // Parceria
}

enum MakingOfMediaType {
  IMAGE         // Apenas imagens
  VIDEO         // Apenas v├¡deos
  MIXED         // Imagens + v├¡deos
}

enum MakingOfStatus {
  DRAFT         // Rascunho
  REVIEW        // Em revis├úo
  APPROVED      // Aprovado
  PUBLISHED     // Publicado
  ARCHIVED      // Arquivado
}

